<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Students</title>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link rel="stylesheet" href="../../ui-requirements/design-system/design-system.css" />
    <link rel="stylesheet" href="../shared/wireframe-base.css" />
    <style>
      /* ============================================
         PAGE-SPECIFIC STYLES: Student List
         ============================================ */

      /* Page-specific: Page subtitle */
      .page-subtitle {
        font-size: 13px;
        color: var(--fg-muted);
        font-variant-numeric: tabular-nums;
      }

      /* List container */
      .list-container {
        background: var(--bg-surface);
        border: 1px solid var(--border-default);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-md);
      }

      /* Toolbar */
      .toolbar {
        padding: var(--space-4);
        border-bottom: 1px solid var(--border-default);
        display: flex;
        flex-direction: column;
        gap: var(--space-3);
      }

      .toolbar-row {
        display: flex;
        gap: var(--space-3);
        align-items: center;
        flex-wrap: wrap;
      }

      /* Search */
      .search-container {
        flex: 1;
        min-width: 240px;
        max-width: 320px;
        position: relative;
      }

      .search-input {
        width: 100%;
        padding: var(--space-2) var(--space-3) var(--space-2) 36px;
        border: 1px solid var(--border-strong);
        border-radius: var(--radius-md);
        font-size: 13px;
        font-family: inherit;
        color: var(--fg-default);
        background: var(--bg-surface);
        transition: border-color 150ms ease, box-shadow 150ms ease;
        min-height: 32px;
      }

      .search-input:hover {
        border-color: var(--fg-faint);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--primary-500);
        box-shadow: 0 0 0 3px var(--primary-50);
      }

      .search-input::placeholder {
        color: var(--fg-faint);
      }

      .search-icon {
        position: absolute;
        left: var(--space-3);
        top: 50%;
        transform: translateY(-50%);
        color: var(--fg-faint);
        width: 14px;
        height: 14px;
      }


      /* Filter tags */
      .active-filters {
        display: flex;
        gap: var(--space-2);
        align-items: center;
        flex-wrap: wrap;
      }

      .filter-tag {
        display: inline-flex;
        align-items: center;
        gap: var(--space-1);
        padding: var(--space-1) var(--space-2);
        background: var(--primary-50);
        color: var(--primary-500);
        border-radius: var(--radius-sm);
        font-size: 12px;
        font-weight: 500;
      }

      .filter-tag .remove {
        cursor: pointer;
        opacity: 0.6;
        transition: opacity 150ms ease;
      }

      .filter-tag .remove:hover {
        opacity: 1;
      }

      .clear-filters-btn {
        font-size: 12px;
        color: var(--fg-muted);
        text-decoration: underline;
        cursor: pointer;
        background: none;
        border: none;
        padding: var(--space-1);
      }

      .clear-filters-btn:hover {
        color: var(--fg-secondary);
      }

      /* Bulk actions */
      .bulk-actions {
        display: flex;
        gap: var(--space-2);
        align-items: center;
        padding: var(--space-2) var(--space-3);
        background: var(--primary-50);
        border-radius: var(--radius-md);
      }

      .bulk-actions-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--primary-500);
        margin-right: var(--space-2);
      }

      /* Column selector - page-specific multi-select dropdown */
      .column-selector {
        position: relative;
      }

      .column-dropdown {
        position: absolute;
        top: calc(100% + 4px);
        right: 0;
        background: var(--bg-surface);
        border: 1px solid var(--border-default);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-lg);
        padding: var(--space-3);
        min-width: 220px;
        max-height: 360px;
        overflow-y: auto;
        z-index: 100;
        display: none;
      }

      .column-dropdown.active {
        display: block;
      }

      .column-dropdown-header {
        font-size: 11px;
        font-weight: 600;
        color: var(--fg-muted);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: var(--space-2) var(--space-2) var(--space-3);
        border-bottom: 1px solid var(--border-default);
        margin-bottom: var(--space-2);
      }

      .column-option {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-2);
        cursor: pointer;
        border-radius: var(--radius-sm);
        transition: background var(--transition-fast);
      }

      .column-option:hover {
        background: var(--bg-muted);
      }

      .column-option input[type="checkbox"] {
        width: 14px;
        height: 14px;
        cursor: pointer;
        accent-color: var(--primary-600);
      }

      .column-option label {
        cursor: pointer;
        font-size: 13px;
        color: var(--fg-secondary);
        flex: 1;
      }

      .column-option.disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Table - sortable columns extension */
      .table th.sortable {
        cursor: pointer;
      }

      .table th.sortable:hover {
        color: var(--fg-secondary);
      }

      .table th.sortable::after {
        content: "";
        display: inline-block;
        width: 12px;
        margin-left: var(--space-1);
      }

      .table th.sorted-asc::after {
        content: "↑";
        color: var(--primary-600);
      }

      .table th.sorted-desc::after {
        content: "↓";
        color: var(--primary-600);
      }

      .table th.checkbox-col {
        width: 40px;
        padding-left: var(--space-4);
      }

      .table tr.selected td {
        background: var(--primary-50);
      }

      /* Table checkbox */
      .table-checkbox {
        width: 14px;
        height: 14px;
        cursor: pointer;
        accent-color: var(--primary-500);
      }

      /* Student name */
      .student-name {
        font-weight: 500;
        color: var(--fg-default);
        text-decoration: none;
        display: block;
        font-size: 13px;
      }

      .student-name:hover {
        color: var(--primary-500);
      }


      /* Notes preview */
      .notes-preview {
        max-width: 180px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        color: var(--fg-muted);
        font-size: 12px;
      }

      /* Contact info */
      .contact-info {
        font-size: 12px;
        color: var(--fg-muted);
      }

      .contact-info a {
        color: var(--primary-500);
        text-decoration: none;
      }

      .contact-info a:hover {
        text-decoration: underline;
      }

      /* Data values - tabular */
      .data-value {
        font-variant-numeric: tabular-nums;
        font-family: ui-monospace, "SF Mono", "Menlo", monospace;
        font-size: 12px;
      }

      /* Pagination */
      .pagination {
        padding: var(--space-4);
        border-top: 1px solid var(--border-default);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: var(--space-4);
      }

      .pagination-info {
        font-size: 13px;
        color: var(--fg-muted);
      }

      .pagination-controls {
        display: flex;
        gap: var(--space-4);
        align-items: center;
      }

      .page-size-selector {
        display: flex;
        align-items: center;
        gap: var(--space-2);
      }

      .page-size-selector label {
        font-size: 12px;
        color: var(--fg-muted);
      }

      .page-size-selector select {
        padding: var(--space-1) var(--space-2);
        border: 1px solid var(--border-strong);
        border-radius: var(--radius-sm);
        font-size: 12px;
        background: var(--bg-surface);
        color: var(--fg-secondary);
        cursor: pointer;
      }

      .page-nav {
        display: flex;
        gap: var(--space-1);
      }

      /* Pagination button active state extension */
      .pagination-btn.active {
        background: var(--primary-600);
        color: white;
        border-color: var(--primary-600);
      }

      .pagination-btn.active:hover {
        background: var(--primary-700);
        border-color: var(--primary-700);
      }

      /* Mobile cards */
      .mobile-cards {
        display: none;
      }

      .student-card {
        padding: var(--space-4);
        border-bottom: 1px solid var(--border-default);
      }

      .student-card:last-child {
        border-bottom: none;
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: var(--space-3);
      }

      .card-name {
        font-size: 15px;
        font-weight: 500;
        color: var(--fg-default);
        margin-bottom: var(--space-1);
        text-decoration: none;
        display: block;
      }

      .card-name:hover {
        color: var(--primary-500);
      }

      .card-details {
        display: flex;
        flex-direction: column;
        gap: var(--space-2);
      }

      .card-row {
        display: flex;
        gap: var(--space-2);
        font-size: 13px;
        color: var(--fg-secondary);
      }

      .card-label {
        color: var(--fg-muted);
        min-width: 80px;
      }

      /* Modal checkbox group - specific styling for tag selection */
      .checkbox-group {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-2);
        margin: calc(var(--space-1) * -1) calc(var(--space-2) * -1);
        cursor: pointer;
        border-radius: var(--radius-sm);
        transition: background 150ms ease;
      }

      .checkbox-group:hover {
        background: var(--bg-subtle);
      }

      .checkbox-group input[type="checkbox"] {
        width: 14px;
        height: 14px;
        cursor: pointer;
        accent-color: var(--primary-500);
      }

      .checkbox-group label {
        cursor: pointer;
        color: var(--fg-secondary);
        font-size: 13px;
        flex: 1;
      }

      /* Empty state */
      .empty-state {
        padding: var(--space-8);
        text-align: center;
        color: var(--fg-muted);
      }

      .empty-state-title {
        font-size: 16px;
        font-weight: 500;
        color: var(--fg-secondary);
        margin-bottom: var(--space-2);
      }

      .empty-state-text {
        font-size: 13px;
        margin-bottom: var(--space-4);
      }

      /* Responsive */
      @media (max-width: 1024px) {
        .main-content {
          padding: var(--space-4);
        }
      }

      @media (max-width: 768px) {
        .sidebar {
          display: none;
        }

        .main-content {
          margin-left: 0;
        }

        .page-header {
          flex-direction: column;
          gap: var(--space-4);
        }

        .toolbar-row {
          flex-direction: column;
          align-items: stretch;
        }

        .search-container {
          max-width: 100%;
        }

        .filter-tabs {
          flex-wrap: wrap;
        }

        .table-wrapper {
          display: none;
        }

        .mobile-cards {
          display: block;
        }

        .pagination {
          flex-direction: column;
          align-items: stretch;
        }

        .pagination-controls {
          flex-direction: column;
          align-items: stretch;
        }

        .page-nav {
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-layout">
      <!-- Sidebar Navigation -->
      <aside class="sidebar" role="navigation" aria-label="Main navigation">
        <div class="sidebar-logo">TutorStudio</div>
        <nav class="sidebar-nav">
          <a href="#" class="nav-item">
            <i class="ph ph-squares-four nav-icon"></i>
            Dashboard
          </a>
          <a href="student-list.html" class="nav-item active">
            <i class="ph ph-users nav-icon"></i>
            Students
          </a>
          <a href="#" class="nav-item">
            <i class="ph ph-calendar nav-icon"></i>
            Calendar
          </a>
          <a href="#" class="nav-item">
            <i class="ph ph-file-text nav-icon"></i>
            Invoices
          </a>
          <a href="#" class="nav-item">
            <i class="ph ph-gear nav-icon"></i>
            Settings
          </a>
        </nav>
        <div class="sidebar-footer">
          <div class="user-info">
            <div class="user-avatar">SJ</div>
            <div>
              <div class="user-name">Sarah Johnson</div>
              <div class="user-email">sarah@example.com</div>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Page Header -->
        <header class="page-header">
          <div class="page-title-group">
            <h1 class="page-title">Students</h1>
            <p class="page-subtitle">247 total students</p>
          </div>
          <a href="add-student.html" class="btn btn-primary btn-md">
            <i class="ph ph-plus"></i>
            Add Student
          </a>
        </header>

        <!-- List Container -->
        <div class="list-container">
          <!-- Toolbar -->
          <div class="toolbar">
            <!-- Search and Controls -->
            <div class="toolbar-row">
              <div class="search-container">
                <i class="ph ph-magnifying-glass search-icon"></i>
                <input
                  type="text"
                  class="search-input"
                  id="searchInput"
                  placeholder="Search students..."
                  oninput="handleSearch()"
                />
              </div>

              <div class="filter-tabs">
                <button
                  class="filter-tab active"
                  onclick="filterByStatus('all')"
                >
                  All
                </button>
                <button class="filter-tab" onclick="filterByStatus('active')">
                  Active
                </button>
                <button class="filter-tab" onclick="filterByStatus('trial')">
                  Trial
                </button>
                <button class="filter-tab" onclick="filterByStatus('waiting')">
                  Waiting
                </button>
                <button class="filter-tab" onclick="filterByStatus('lead')">
                  Lead
                </button>
                <button
                  class="filter-tab"
                  onclick="filterByStatus('inactive')"
                >
                  Inactive
                </button>
              </div>

              <button class="btn btn-secondary btn-md" onclick="toggleTagModal()">
                <i class="ph ph-tag"></i>
                Tags
              </button>

              <div class="column-selector">
                <button
                  class="btn btn-secondary btn-md"
                  onclick="toggleColumnDropdown()"
                >
                  <i class="ph ph-dots-three-vertical"></i>
                  Columns
                </button>
                <div class="column-dropdown" id="columnDropdown">
                  <div class="column-dropdown-header">Visible Columns</div>
                  <div class="column-option disabled">
                    <input type="checkbox" id="col-name" checked disabled />
                    <label for="col-name">Name</label>
                  </div>
                  <div class="column-option">
                    <input
                      type="checkbox"
                      id="col-status"
                      checked
                      onchange="toggleColumn('status')"
                    />
                    <label for="col-status">Status</label>
                  </div>
                  <div class="column-option">
                    <input
                      type="checkbox"
                      id="col-age"
                      checked
                      onchange="toggleColumn('age')"
                    />
                    <label for="col-age">Age</label>
                  </div>
                  <div class="column-option">
                    <input
                      type="checkbox"
                      id="col-family"
                      checked
                      onchange="toggleColumn('family')"
                    />
                    <label for="col-family">Family</label>
                  </div>
                  <div class="column-option">
                    <input
                      type="checkbox"
                      id="col-tags"
                      checked
                      onchange="toggleColumn('tags')"
                    />
                    <label for="col-tags">Tags</label>
                  </div>
                  <div class="column-option">
                    <input
                      type="checkbox"
                      id="col-credits"
                      checked
                      onchange="toggleColumn('credits')"
                    />
                    <label for="col-credits">Credits</label>
                  </div>
                  <div class="column-option">
                    <input
                      type="checkbox"
                      id="col-next-lesson"
                      checked
                      onchange="toggleColumn('next-lesson')"
                    />
                    <label for="col-next-lesson">Next Lesson</label>
                  </div>
                  <div class="column-option">
                    <input
                      type="checkbox"
                      id="col-notes"
                      onchange="toggleColumn('notes')"
                    />
                    <label for="col-notes">Notes</label>
                  </div>
                  <div class="column-option">
                    <input
                      type="checkbox"
                      id="col-contact"
                      onchange="toggleColumn('contact')"
                    />
                    <label for="col-contact">Contact</label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Active Filters (hidden by default) -->
            <div
              class="toolbar-row"
              id="activeFiltersRow"
              style="display: none"
            >
              <div class="active-filters" id="activeFilters"></div>
              <button class="clear-filters-btn" onclick="clearAllFilters()">
                Clear all
              </button>
            </div>

            <!-- Bulk Actions (hidden by default) -->
            <div class="toolbar-row" id="bulkActionsRow" style="display: none">
              <div class="bulk-actions">
                <span class="bulk-actions-label"
                  ><span id="selectedCount">0</span> selected</span
                >
                <button
                  class="btn btn-ghost btn-small"
                  onclick="bulkAssignTag()"
                >
                  Assign Tag
                </button>
                <button
                  class="btn btn-ghost btn-small"
                  onclick="bulkSetStatus()"
                >
                  Set Status
                </button>
                <button
                  class="btn btn-ghost btn-small"
                  onclick="bulkSendEmail()"
                >
                  Send Email
                </button>
                <button
                  class="btn btn-ghost btn-small"
                  onclick="bulkDownload()"
                >
                  Export
                </button>
              </div>
            </div>
          </div>

          <!-- Desktop Table -->
          <div class="table-wrapper">
            <table class="table">
              <thead>
                <tr>
                  <th class="checkbox-col">
                    <input
                      type="checkbox"
                      class="table-checkbox"
                      id="selectAll"
                      onchange="toggleSelectAll()"
                      aria-label="Select all"
                    />
                  </th>
                  <th class="sortable sorted-asc" onclick="sortTable('name')">
                    Name
                  </th>
                  <th class="sortable col-status" onclick="sortTable('status')">
                    Status
                  </th>
                  <th class="sortable col-age" onclick="sortTable('age')">
                    Age
                  </th>
                  <th class="col-family">Family</th>
                  <th class="col-tags">Tags</th>
                  <th
                    class="sortable col-credits"
                    onclick="sortTable('credits')"
                  >
                    Credits
                  </th>
                  <th
                    class="sortable col-next-lesson"
                    onclick="sortTable('next-lesson')"
                  >
                    Next Lesson
                  </th>
                  <th class="col-notes" style="display: none">Notes</th>
                  <th class="col-contact" style="display: none">Contact</th>
                </tr>
              </thead>
              <tbody id="studentTableBody">
                <tr class="student-row" data-student-id="1">
                  <td>
                    <input
                      type="checkbox"
                      class="table-checkbox student-checkbox"
                      onchange="updateBulkActions()"
                    />
                  </td>
                  <td><a href="student-detail.html" class="student-name">Emily Chen</a></td>
                  <td class="col-status">
                    <span class="badge badge-success">Active</span>
                  </td>
                  <td class="col-age"><span class="data-value">14</span></td>
                  <td class="col-family">Chen Family</td>
                  <td class="col-tags">
                    <div class="tag-list">
                      <span class="tag tag-outline">Piano</span>
                      <span class="tag tag-orange">Advanced</span>
                    </div>
                  </td>
                  <td class="col-credits"><span class="data-value">2</span></td>
                  <td class="col-next-lesson">Today, 3:00 PM</td>
                  <td class="col-notes" style="display: none">
                    <div class="notes-preview">
                      Preparing for recital in March
                    </div>
                  </td>
                  <td class="col-contact" style="display: none">
                    <div class="contact-info">
                      <a href="mailto:emily@example.com">emily@example.com</a>
                    </div>
                  </td>
                </tr>
                <tr class="student-row" data-student-id="2">
                  <td>
                    <input
                      type="checkbox"
                      class="table-checkbox student-checkbox"
                      onchange="updateBulkActions()"
                    />
                  </td>
                  <td><a href="student-detail.html" class="student-name">Marcus Williams</a></td>
                  <td class="col-status">
                    <span class="badge badge-indigo">Trial</span>
                  </td>
                  <td class="col-age"><span class="data-value">12</span></td>
                  <td class="col-family">Williams Family</td>
                  <td class="col-tags">
                    <div class="tag-list">
                      <span class="tag tag-outline">Piano</span>
                      <span class="tag tag-green">Beginner</span>
                    </div>
                  </td>
                  <td class="col-credits"><span class="data-value">0</span></td>
                  <td class="col-next-lesson">Tomorrow, 4:30 PM</td>
                  <td class="col-notes" style="display: none">
                    <div class="notes-preview">Second trial lesson</div>
                  </td>
                  <td class="col-contact" style="display: none">
                    <div class="contact-info">
                      <a href="mailto:marcus@example.com">marcus@example.com</a>
                    </div>
                  </td>
                </tr>
                <tr class="student-row" data-student-id="3">
                  <td>
                    <input
                      type="checkbox"
                      class="table-checkbox student-checkbox"
                      onchange="updateBulkActions()"
                    />
                  </td>
                  <td><a href="student-detail.html" class="student-name">Sophie Martinez</a></td>
                  <td class="col-status">
                    <span class="badge badge-success">Active</span>
                  </td>
                  <td class="col-age"><span class="data-value">16</span></td>
                  <td class="col-family">Martinez Family</td>
                  <td class="col-tags">
                    <div class="tag-list">
                      <span class="tag tag-outline">Piano</span>
                      <span class="tag tag-orange">Advanced</span>
                    </div>
                  </td>
                  <td class="col-credits"><span class="data-value">1</span></td>
                  <td class="col-next-lesson">Jan 8, 2:00 PM</td>
                  <td class="col-notes" style="display: none">
                    <div class="notes-preview">Working on Chopin Nocturne</div>
                  </td>
                  <td class="col-contact" style="display: none">
                    <div class="contact-info">
                      <a href="mailto:sophie@example.com">sophie@example.com</a>
                    </div>
                  </td>
                </tr>
                <tr class="student-row" data-student-id="4">
                  <td>
                    <input
                      type="checkbox"
                      class="table-checkbox student-checkbox"
                      onchange="updateBulkActions()"
                    />
                  </td>
                  <td><a href="student-detail.html" class="student-name">Alex Thompson</a></td>
                  <td class="col-status">
                    <span class="badge badge-warning">Waiting</span>
                  </td>
                  <td class="col-age"><span class="data-value">10</span></td>
                  <td class="col-family">Thompson Family</td>
                  <td class="col-tags">
                    <div class="tag-list">
                      <span class="tag tag-outline">Piano</span>
                      <span class="tag tag-green">Beginner</span>
                    </div>
                  </td>
                  <td class="col-credits"><span class="data-value">0</span></td>
                  <td class="col-next-lesson">—</td>
                  <td class="col-notes" style="display: none">
                    <div class="notes-preview">Waitlisted for time slot</div>
                  </td>
                  <td class="col-contact" style="display: none">
                    <div class="contact-info">
                      <a href="mailto:alex@example.com">alex@example.com</a>
                    </div>
                  </td>
                </tr>
                <tr class="student-row" data-student-id="5">
                  <td>
                    <input
                      type="checkbox"
                      class="table-checkbox student-checkbox"
                      onchange="updateBulkActions()"
                    />
                  </td>
                  <td><a href="student-detail.html" class="student-name">Ada Malkoc</a></td>
                  <td class="col-status">
                    <span class="badge badge-success">Active</span>
                  </td>
                  <td class="col-age"><span class="data-value">13</span></td>
                  <td class="col-family">Garcia Family</td>
                  <td class="col-tags">
                    <div class="tag-list">
                      <span class="tag tag-outline">Piano</span>
                      <span class="tag tag-yellow">Intermediate</span>
                    </div>
                  </td>
                  <td class="col-credits"><span class="data-value">3</span></td>
                  <td class="col-next-lesson">Jan 6, 5:00 PM</td>
                  <td class="col-notes" style="display: none">
                    <div class="notes-preview">Focus on sight reading</div>
                  </td>
                  <td class="col-contact" style="display: none">
                    <div class="contact-info">
                      <a href="mailto:isabella@example.com"
                        >isabella@example.com</a
                      >
                    </div>
                  </td>
                </tr>
                <tr class="student-row" data-student-id="6">
                  <td>
                    <input
                      type="checkbox"
                      class="table-checkbox student-checkbox"
                      onchange="updateBulkActions()"
                    />
                  </td>
                  <td><a href="student-detail.html" class="student-name">James Lee</a></td>
                  <td class="col-status">
                    <span class="badge badge-cyan">Lead</span>
                  </td>
                  <td class="col-age"><span class="data-value">15</span></td>
                  <td class="col-family">Lee Family</td>
                  <td class="col-tags">
                    <div class="tag-list">
                      <span class="tag tag-outline">Piano</span>
                    </div>
                  </td>
                  <td class="col-credits"><span class="data-value">0</span></td>
                  <td class="col-next-lesson">—</td>
                  <td class="col-notes" style="display: none">
                    <div class="notes-preview">Scheduling consultation</div>
                  </td>
                  <td class="col-contact" style="display: none">
                    <div class="contact-info">
                      <a href="mailto:james@example.com">james@example.com</a>
                    </div>
                  </td>
                </tr>
                <tr class="student-row" data-student-id="7">
                  <td>
                    <input
                      type="checkbox"
                      class="table-checkbox student-checkbox"
                      onchange="updateBulkActions()"
                    />
                  </td>
                  <td><a href="student-detail.html" class="student-name">Olivia Brown</a></td>
                  <td class="col-status">
                    <span class="badge badge-success">Active</span>
                  </td>
                  <td class="col-age"><span class="data-value">11</span></td>
                  <td class="col-family">Brown Family</td>
                  <td class="col-tags">
                    <div class="tag-list">
                      <span class="tag tag-outline">Piano</span>
                      <span class="tag tag-green">Beginner</span>
                    </div>
                  </td>
                  <td class="col-credits"><span class="data-value">1</span></td>
                  <td class="col-next-lesson">Jan 7, 3:30 PM</td>
                  <td class="col-notes" style="display: none">
                    <div class="notes-preview">Focus on music theory</div>
                  </td>
                  <td class="col-contact" style="display: none">
                    <div class="contact-info">
                      <a href="mailto:olivia@example.com">olivia@example.com</a>
                    </div>
                  </td>
                </tr>
                <tr class="student-row" data-student-id="8">
                  <td>
                    <input
                      type="checkbox"
                      class="table-checkbox student-checkbox"
                      onchange="updateBulkActions()"
                    />
                  </td>
                  <td><a href="student-detail.html" class="student-name">Ethan Davis</a></td>
                  <td class="col-status">
                    <span class="badge badge-default">Inactive</span>
                  </td>
                  <td class="col-age"><span class="data-value">17</span></td>
                  <td class="col-family">Davis Family</td>
                  <td class="col-tags">
                    <div class="tag-list">
                      <span class="tag tag-outline">Piano</span>
                      <span class="tag tag-orange">Advanced</span>
                    </div>
                  </td>
                  <td class="col-credits"><span class="data-value">0</span></td>
                  <td class="col-next-lesson">—</td>
                  <td class="col-notes" style="display: none">
                    <div class="notes-preview">Paused for college apps</div>
                  </td>
                  <td class="col-contact" style="display: none">
                    <div class="contact-info">
                      <a href="mailto:ethan@example.com">ethan@example.com</a>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Mobile Cards -->
          <div class="mobile-cards">
            <div class="student-card" data-student-id="1">
              <div class="card-header">
                <div>
                  <a href="student-detail.html" class="card-name">Emily Chen</a>
                  <span class="badge badge-success">Active</span>
                </div>
                <input
                  type="checkbox"
                  class="table-checkbox student-checkbox"
                  onchange="updateBulkActions()"
                />
              </div>
              <div class="card-details">
                <div class="card-row">
                  <span class="card-label">Age</span>
                  <span>14 · Piano · Advanced</span>
                </div>
                <div class="card-row">
                  <span class="card-label">Next</span>
                  <span>Today, 3:00 PM</span>
                </div>
                <div class="card-row">
                  <span class="card-label">Credits</span>
                  <span>2</span>
                </div>
              </div>
            </div>

            <div class="student-card" data-student-id="2">
              <div class="card-header">
                <div>
                  <a href="student-detail.html" class="card-name">Marcus Williams</a>
                  <span class="badge badge-indigo">Trial</span>
                </div>
                <input
                  type="checkbox"
                  class="table-checkbox student-checkbox"
                  onchange="updateBulkActions()"
                />
              </div>
              <div class="card-details">
                <div class="card-row">
                  <span class="card-label">Age</span>
                  <span>12 · Piano · Beginner</span>
                </div>
                <div class="card-row">
                  <span class="card-label">Next</span>
                  <span>Tomorrow, 4:30 PM</span>
                </div>
                <div class="card-row">
                  <span class="card-label">Credits</span>
                  <span>0</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Pagination -->
          <div class="pagination">
            <div class="pagination-info">
              Showing <strong>1–8</strong> of <strong>247</strong>
            </div>
            <div class="pagination-controls">
              <div class="page-size-selector">
                <label for="pageSize">Show</label>
                <select id="pageSize" onchange="changePageSize()">
                  <option value="25" selected>25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
              </div>
              <div class="page-nav">
                <button class="pagination-btn" disabled>←</button>
                <button class="pagination-btn active">1</button>
                <button class="pagination-btn">2</button>
                <button class="pagination-btn">3</button>
                <button class="pagination-btn">…</button>
                <button class="pagination-btn">10</button>
                <button class="pagination-btn">→</button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Tag Filter Modal -->
    <div class="modal-backdrop" id="tagModal" onclick="closeTagModal(event)">
      <div class="modal" onclick="event.stopPropagation()">
        <div class="modal-header">
          <h3 class="modal-title">Filter by Tags</h3>
          <button class="modal-close" onclick="closeTagModal()">
            <i class="ph ph-x"></i>
          </button>
        </div>
        <div class="modal-body">
          <p class="text-secondary mb-4">
            Select tags to filter students. Students with any of the selected tags
            will be shown.
          </p>
          <div class="checkbox-group">
            <input type="checkbox" id="tag-piano" value="Piano" />
            <label for="tag-piano">Piano</label>
          </div>
          <div class="checkbox-group">
            <input type="checkbox" id="tag-beginner" value="Beginner" />
            <label for="tag-beginner">Beginner</label>
          </div>
          <div class="checkbox-group">
            <input type="checkbox" id="tag-intermediate" value="Intermediate" />
            <label for="tag-intermediate">Intermediate</label>
          </div>
          <div class="checkbox-group">
            <input type="checkbox" id="tag-advanced" value="Advanced" />
            <label for="tag-advanced">Advanced</label>
          </div>
          <div class="checkbox-group">
            <input type="checkbox" id="tag-recital" value="Recital Prep" />
            <label for="tag-recital">Recital Prep</label>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary btn-md" onclick="closeTagModal()">
            Cancel
          </button>
          <button class="btn btn-primary btn-md" onclick="applyTagFilters()">
            Apply
          </button>
        </div>
      </div>
    </div>

    <script>
      // Column Management
      function toggleColumnDropdown() {
        const dropdown = document.getElementById("columnDropdown");
        dropdown.classList.toggle("active");
      }

      document.addEventListener("click", function (event) {
        const dropdown = document.getElementById("columnDropdown");
        const columnSelector = document.querySelector(".column-selector");
        if (!columnSelector.contains(event.target)) {
          dropdown.classList.remove("active");
        }
      });

      function toggleColumn(columnClass) {
        const checkbox = document.getElementById(`col-${columnClass}`);
        const columns = document.querySelectorAll(`.col-${columnClass}`);
        columns.forEach((col) => {
          col.style.display = checkbox.checked ? "" : "none";
        });
      }

      // Sorting
      let currentSort = { column: "name", direction: "asc" };

      function sortTable(column) {
        const headers = document.querySelectorAll("th.sortable");
        headers.forEach((h) => h.classList.remove("sorted-asc", "sorted-desc"));

        if (currentSort.column === column) {
          currentSort.direction =
            currentSort.direction === "asc" ? "desc" : "asc";
        } else {
          currentSort.column = column;
          currentSort.direction = "asc";
        }

        const header = event.target.closest("th");
        header.classList.add(
          currentSort.direction === "asc" ? "sorted-asc" : "sorted-desc"
        );
      }

      // Status Filtering
      let activeStatus = "all";

      function filterByStatus(status) {
        activeStatus = status;
        const chips = document.querySelectorAll(".filter-tab");
        chips.forEach((chip) => chip.classList.remove("active"));
        event.target.classList.add("active");
        updateActiveFiltersDisplay();
      }

      // Tag Filtering
      let activeTags = [];

      function toggleTagModal() {
        document.getElementById("tagModal").classList.add("open");
        document.body.style.overflow = "hidden";
      }

      function closeTagModal(event) {
        if (!event || event.target === event.currentTarget) {
          document.getElementById("tagModal").classList.remove("open");
          document.body.style.overflow = "";
        }
      }

      function applyTagFilters() {
        activeTags = [];
        const checkboxes = document.querySelectorAll(
          '#tagModal input[type="checkbox"]'
        );
        checkboxes.forEach((cb) => {
          if (cb.checked) activeTags.push(cb.value);
        });
        updateActiveFiltersDisplay();
        closeTagModal();
      }

      // Search
      let searchTerm = "";

      function handleSearch() {
        searchTerm = document.getElementById("searchInput").value;
        updateActiveFiltersDisplay();
      }

      // Active Filters Display
      function updateActiveFiltersDisplay() {
        const row = document.getElementById("activeFiltersRow");
        const container = document.getElementById("activeFilters");
        const hasFilters =
          searchTerm || activeStatus !== "all" || activeTags.length > 0;

        if (!hasFilters) {
          row.style.display = "none";
          return;
        }

        row.style.display = "flex";
        container.innerHTML = "";

        if (searchTerm) {
          container.innerHTML += `
                    <span class="filter-tag">
                        "${searchTerm}"
                        <span class="remove" onclick="clearSearch()">×</span>
                    </span>
                `;
        }

        if (activeStatus !== "all") {
          container.innerHTML += `
                    <span class="filter-tag">
                        ${activeStatus}
                        <span class="remove" onclick="clearStatusFilter()">×</span>
                    </span>
                `;
        }

        activeTags.forEach((tag) => {
          container.innerHTML += `
                    <span class="filter-tag">
                        ${tag}
                        <span class="remove" onclick="removeTag('${tag}')">×</span>
                    </span>
                `;
        });
      }

      function clearSearch() {
        document.getElementById("searchInput").value = "";
        searchTerm = "";
        updateActiveFiltersDisplay();
      }

      function clearStatusFilter() {
        activeStatus = "all";
        document.querySelector(".filter-tab").classList.add("active");
        document.querySelectorAll(".filter-tab").forEach((chip, i) => {
          if (i > 0) chip.classList.remove("active");
        });
        updateActiveFiltersDisplay();
      }

      function removeTag(tag) {
        activeTags = activeTags.filter((t) => t !== tag);
        const checkbox = Array.from(
          document.querySelectorAll('#tagModal input[type="checkbox"]')
        ).find((cb) => cb.value === tag);
        if (checkbox) checkbox.checked = false;
        updateActiveFiltersDisplay();
      }

      function clearAllFilters() {
        clearSearch();
        clearStatusFilter();
        activeTags = [];
        document
          .querySelectorAll('#tagModal input[type="checkbox"]')
          .forEach((cb) => (cb.checked = false));
        updateActiveFiltersDisplay();
      }

      // Bulk Selection
      function toggleSelectAll() {
        const selectAll = document.getElementById("selectAll");
        const checkboxes = document.querySelectorAll(".student-checkbox");
        checkboxes.forEach((cb) => (cb.checked = selectAll.checked));
        updateBulkActions();
      }

      function updateBulkActions() {
        const checkboxes = document.querySelectorAll(
          ".student-checkbox:checked"
        );
        const count = checkboxes.length;
        const bulkRow = document.getElementById("bulkActionsRow");
        const selectedCount = document.getElementById("selectedCount");

        if (count > 0) {
          bulkRow.style.display = "flex";
          selectedCount.textContent = count;
          const allCheckboxes = document.querySelectorAll(".student-checkbox");
          const selectAll = document.getElementById("selectAll");
          selectAll.checked = count === allCheckboxes.length;
          selectAll.indeterminate = count > 0 && count < allCheckboxes.length;
        } else {
          bulkRow.style.display = "none";
          document.getElementById("selectAll").checked = false;
          document.getElementById("selectAll").indeterminate = false;
        }
      }

      // Bulk Actions (stubs)
      function bulkAssignTag() {
        alert("Assign tag to selected students");
      }
      function bulkSetStatus() {
        alert("Set status for selected students");
      }
      function bulkSendEmail() {
        alert("Send email to selected students");
      }
      function bulkDownload() {
        alert("Export selected students");
      }

      // Pagination
      function changePageSize() {
        const pageSize = document.getElementById("pageSize").value;
        console.log("Page size:", pageSize);
      }
    </script>
  </body>
</html>
