<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student List - Twilight Purple Theme</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
            background: linear-gradient(135deg, #fafaf9 0%, #f5f3ff 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #18181b;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Page Header */
        .page-header {
            background: linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%);
            color: white;
            padding: 40px;
            border-radius: 24px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 24px;
        }

        .page-header h1 {
            font-size: 32px;
            font-weight: 300;
            letter-spacing: -0.5px;
        }

        .page-header .student-count {
            font-size: 15px;
            opacity: 0.9;
            margin-top: 8px;
        }

        .btn {
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            min-height: 52px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-primary {
            background: white;
            color: #7c3aed;
            font-weight: 600;
            box-shadow: 0 4px 16px rgba(255, 255, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(255, 255, 255, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #71717a;
            border: 1.5px solid #e4e4e7;
            font-weight: 500;
            padding: 12px 24px;
            min-height: 44px;
        }

        .btn-secondary:hover {
            background: #fafafa;
            border-color: #d4d4d8;
            transform: translateY(-2px);
        }

        .btn-small {
            padding: 10px 20px;
            font-size: 14px;
            min-height: 40px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* List Container */
        .list-container {
            background: white;
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        /* Toolbar */
        .toolbar {
            padding: 32px;
            border-bottom: 1.5px solid #f5f3ff;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .toolbar-row {
            display: flex;
            gap: 16px;
            align-items: center;
            flex-wrap: wrap;
        }

        /* Search */
        .search-container {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 14px 16px 14px 48px;
            border: 1.5px solid #e4e4e7;
            border-radius: 12px;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: #fafafa;
            color: #18181b;
        }

        .search-input:hover {
            border-color: #d4d4d8;
            background: white;
        }

        .search-input:focus {
            outline: none;
            border-color: #7c3aed;
            background: white;
            box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #71717a;
            font-size: 18px;
        }

        /* Filters */
        .filter-section {
            display: flex;
            gap: 16px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-label {
            font-size: 13px;
            font-weight: 600;
            color: #52525b;
        }

        .status-filters {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .status-chip {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: 1.5px solid #e4e4e7;
            background: white;
            color: #71717a;
        }

        .status-chip:hover {
            border-color: #7c3aed;
            background: #faf5ff;
        }

        .status-chip.active {
            background: linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%);
            color: white;
            border-color: #7c3aed;
        }

        .tag-filter-btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: 1.5px solid #e4e4e7;
            background: white;
            color: #71717a;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .tag-filter-btn:hover {
            border-color: #7c3aed;
            background: #faf5ff;
        }

        .tag-filter-btn.has-filters {
            background: #faf5ff;
            border-color: #7c3aed;
            color: #7c3aed;
        }

        .filter-count {
            background: #7c3aed;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
        }

        /* Active Filters Display */
        .active-filters {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-tag {
            padding: 6px 12px;
            background: linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%);
            color: #581c87;
            border: 1.5px solid #a78bfa;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .filter-tag .remove {
            cursor: pointer;
            font-weight: 700;
            color: #581c87;
        }

        .clear-filters-btn {
            font-size: 13px;
            color: #71717a;
            text-decoration: underline;
            cursor: pointer;
            background: none;
            border: none;
            padding: 4px 8px;
        }

        .clear-filters-btn:hover {
            color: #7c3aed;
        }

        /* Bulk Actions */
        .bulk-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        /* Column Selector */
        .column-selector {
            position: relative;
        }

        .column-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: white;
            border: 1.5px solid #e4e4e7;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            padding: 16px;
            min-width: 280px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .column-dropdown.active {
            display: block;
        }

        .column-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            cursor: pointer;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .column-option:hover {
            background: #fafafa;
        }

        .column-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #7c3aed;
        }

        .column-option label {
            cursor: pointer;
            font-size: 14px;
            color: #3f3f46;
            flex: 1;
        }

        .column-option.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Table */
        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #fafafa;
            border-bottom: 1.5px solid #e4e4e7;
        }

        th {
            padding: 16px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: #52525b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            white-space: nowrap;
            cursor: pointer;
            user-select: none;
        }

        th:hover {
            background: #f5f3ff;
        }

        th.sortable::after {
            content: ' ‚Üï';
            opacity: 0.3;
            font-size: 12px;
        }

        th.sorted-asc::after {
            content: ' ‚Üë';
            opacity: 1;
            color: #7c3aed;
        }

        th.sorted-desc::after {
            content: ' ‚Üì';
            opacity: 1;
            color: #7c3aed;
        }

        th.checkbox-col {
            width: 50px;
            cursor: default;
        }

        th.checkbox-col:hover {
            background: #fafafa;
        }

        td {
            padding: 16px;
            border-bottom: 1px solid #f5f3ff;
            font-size: 14px;
            color: #3f3f46;
        }

        tr:hover {
            background: #fafaf9;
        }

        tr.selected {
            background: #faf5ff;
        }

        .student-name {
            font-weight: 600;
            color: #18181b;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            display: inline-block;
        }

        .status-active {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            color: #065f46;
            border: 1px solid #10b981;
        }

        .status-trial {
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
            color: #3730a3;
            border: 1px solid #6366f1;
        }

        .status-waiting {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            color: #92400e;
            border: 1px solid #fbbf24;
        }

        .status-lead {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            color: #1e3a8a;
            border: 1px solid #3b82f6;
        }

        .status-inactive {
            background: linear-gradient(135deg, #f4f4f5 0%, #e4e4e7 100%);
            color: #3f3f46;
            border: 1px solid #a1a1aa;
        }

        .tag-list {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }

        .tag {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            display: inline-block;
        }

        .tag-piano {
            background: #fce7f3;
            color: #9f1239;
            border: 1px solid #f9a8d4;
        }

        .tag-beginner {
            background: #dbeafe;
            color: #1e3a8a;
            border: 1px solid #93c5fd;
        }

        .tag-advanced {
            background: #e9d5ff;
            color: #581c87;
            border: 1px solid #c084fc;
        }

        .notes-preview {
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: #71717a;
            font-size: 13px;
        }

        .contact-info {
            font-size: 13px;
            color: #71717a;
        }

        .contact-info a {
            color: #7c3aed;
            text-decoration: none;
        }

        .contact-info a:hover {
            text-decoration: underline;
        }

        /* Pagination */
        .pagination {
            padding: 32px;
            border-top: 1.5px solid #f5f3ff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 24px;
        }

        .pagination-info {
            font-size: 14px;
            color: #71717a;
        }

        .pagination-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .page-size-selector {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .page-size-selector label {
            font-size: 13px;
            color: #71717a;
        }

        .page-size-selector select {
            padding: 8px 12px;
            border: 1.5px solid #e4e4e7;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
            color: #3f3f46;
        }

        .page-nav {
            display: flex;
            gap: 8px;
        }

        .page-btn {
            padding: 8px 12px;
            border: 1.5px solid #e4e4e7;
            border-radius: 8px;
            background: white;
            color: #71717a;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .page-btn:hover:not(:disabled) {
            border-color: #7c3aed;
            background: #faf5ff;
            color: #7c3aed;
        }

        .page-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .page-btn.active {
            background: linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%);
            color: white;
            border-color: #7c3aed;
        }

        .page-input {
            width: 60px;
            padding: 8px;
            border: 1.5px solid #e4e4e7;
            border-radius: 8px;
            font-size: 14px;
            text-align: center;
        }

        /* Mobile Cards */
        .mobile-cards {
            display: none;
        }

        .student-card {
            padding: 24px;
            border-bottom: 1px solid #f5f3ff;
            cursor: pointer;
            transition: background 0.2s;
        }

        .student-card:hover {
            background: #fafaf9;
        }

        .student-card.selected {
            background: #faf5ff;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 16px;
        }

        .card-name {
            font-size: 18px;
            font-weight: 600;
            color: #18181b;
            margin-bottom: 4px;
        }

        .card-details {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .card-row {
            display: flex;
            gap: 8px;
            align-items: center;
            font-size: 14px;
            color: #52525b;
        }

        .card-label {
            font-weight: 500;
            color: #71717a;
            min-width: 100px;
        }

        /* Modal/Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 16px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            font-size: 20px;
            font-weight: 600;
            color: #18181b;
            margin-bottom: 24px;
        }

        .modal-section {
            margin-bottom: 16px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .checkbox-group:hover {
            background: #fafafa;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #7c3aed;
        }

        .checkbox-group label {
            cursor: pointer;
            color: #3f3f46;
            font-size: 14px;
            flex: 1;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 24px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .page-header {
                padding: 24px;
            }

            .page-header h1 {
                font-size: 24px;
            }

            .toolbar {
                padding: 24px;
            }

            .toolbar-row {
                flex-direction: column;
                align-items: stretch;
            }

            .search-container {
                min-width: 100%;
            }

            .filter-section {
                flex-direction: column;
                align-items: stretch;
            }

            .table-wrapper {
                display: none;
            }

            .mobile-cards {
                display: block;
            }

            .pagination {
                padding: 24px;
                flex-direction: column;
                align-items: stretch;
            }

            .pagination-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .page-size-selector {
                justify-content: space-between;
            }

            .page-nav {
                justify-content: center;
            }
        }

        /* Empty State */
        .empty-state {
            padding: 80px 40px;
            text-align: center;
            color: #71717a;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.3;
        }

        .empty-state-title {
            font-size: 20px;
            font-weight: 600;
            color: #52525b;
            margin-bottom: 8px;
        }

        .empty-state-text {
            font-size: 15px;
            margin-bottom: 24px;
        }

        /* Loading State */
        .loading {
            padding: 80px 40px;
            text-align: center;
        }

        .spinner {
            border: 3px solid #f5f3ff;
            border-top: 3px solid #7c3aed;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <div>
                <h1>Students</h1>
                <div class="student-count">247 total students</div>
            </div>
            <button class="btn btn-primary" onclick="window.location.href='add-student.html'">+ Add Student</button>
        </div>

        <!-- List Container -->
        <div class="list-container">
            <!-- Toolbar -->
            <div class="toolbar">
                <!-- Search and Actions Row -->
                <div class="toolbar-row">
                    <div class="search-container">
                        <span class="search-icon">üîç</span>
                        <input type="text"
                               class="search-input"
                               id="searchInput"
                               placeholder="Search students by name, email, phone, family..."
                               oninput="handleSearch()">
                    </div>
                    <div class="column-selector">
                        <button class="btn btn-secondary btn-small" onclick="toggleColumnDropdown()">
                            ‚öô Columns
                        </button>
                        <div class="column-dropdown" id="columnDropdown">
                            <div style="margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid #e4e4e7;">
                                <div style="font-weight: 600; font-size: 13px; color: #52525b; margin-bottom: 8px;">Select Columns</div>
                                <button class="btn btn-secondary btn-small" style="width: 100%;" onclick="resetColumns()">Reset to Default</button>
                            </div>
                            <div class="column-option disabled">
                                <input type="checkbox" id="col-name" checked disabled>
                                <label for="col-name">Student Name (Always Visible)</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-status" checked onchange="toggleColumn('status')">
                                <label for="col-status">Status</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-age" checked onchange="toggleColumn('age')">
                                <label for="col-age">Age</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-family" checked onchange="toggleColumn('family')">
                                <label for="col-family">Family</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-tags" checked onchange="toggleColumn('tags')">
                                <label for="col-tags">Group Tags</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-credits" checked onchange="toggleColumn('credits')">
                                <label for="col-credits">Make-Up Credits</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-next-lesson" checked onchange="toggleColumn('next-lesson')">
                                <label for="col-next-lesson">Next Lesson</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-notes" checked onchange="toggleColumn('notes')">
                                <label for="col-notes">Notes</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-contact" checked onchange="toggleColumn('contact')">
                                <label for="col-contact">Student Contact</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-tutors" checked onchange="toggleColumn('tutors')">
                                <label for="col-tutors">Tutors</label>
                            </div>
                            <div style="margin: 12px 0; padding: 12px 0; border-top: 1px solid #e4e4e7; border-bottom: 1px solid #e4e4e7;">
                                <div style="font-size: 12px; color: #71717a; font-weight: 600; margin-bottom: 8px;">Additional Columns</div>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-attendance" onchange="toggleColumn('attendance')">
                                <label for="col-attendance">Attendance Average</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-birthday" onchange="toggleColumn('birthday')">
                                <label for="col-birthday">Birthday</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-last-lesson" onchange="toggleColumn('last-lesson')">
                                <label for="col-last-lesson">Last Lesson</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-subjects" onchange="toggleColumn('subjects')">
                                <label for="col-subjects">Subjects</label>
                            </div>
                            <div class="column-option">
                                <input type="checkbox" id="col-school" onchange="toggleColumn('school')">
                                <label for="col-school">School</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Status Filters Row -->
                <div class="toolbar-row">
                    <span class="filter-label">Status:</span>
                    <div class="status-filters">
                        <button class="status-chip active" onclick="filterByStatus('all')">All</button>
                        <button class="status-chip" onclick="filterByStatus('active')">Active</button>
                        <button class="status-chip" onclick="filterByStatus('trial')">Trial</button>
                        <button class="status-chip" onclick="filterByStatus('waiting')">Waiting</button>
                        <button class="status-chip" onclick="filterByStatus('lead')">Lead</button>
                        <button class="status-chip" onclick="filterByStatus('inactive')">Inactive</button>
                    </div>
                    <button class="tag-filter-btn" onclick="toggleTagModal()">
                        üè∑ Tags
                    </button>
                </div>

                <!-- Active Filters Display -->
                <div class="toolbar-row" id="activeFiltersRow" style="display: none;">
                    <span class="filter-label">Active Filters:</span>
                    <div class="active-filters" id="activeFilters">
                        <!-- Dynamic filter tags will appear here -->
                    </div>
                    <button class="clear-filters-btn" onclick="clearAllFilters()">Clear All</button>
                </div>

                <!-- Bulk Actions Row -->
                <div class="toolbar-row" id="bulkActionsRow" style="display: none;">
                    <span class="filter-label"><span id="selectedCount">0</span> selected</span>
                    <div class="bulk-actions">
                        <button class="btn btn-secondary btn-small" onclick="bulkAssignTag()">Assign Tag</button>
                        <button class="btn btn-secondary btn-small" onclick="bulkSetStatus()">Set Status</button>
                        <button class="btn btn-secondary btn-small" onclick="bulkEditCredits()">Edit Credits</button>
                        <button class="btn btn-secondary btn-small" onclick="bulkSendEmail()">Send Email</button>
                        <button class="btn btn-secondary btn-small" onclick="bulkDownload()">Download</button>
                    </div>
                </div>
            </div>

            <!-- Desktop Table View -->
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th class="checkbox-col">
                                <input type="checkbox"
                                       id="selectAll"
                                       onchange="toggleSelectAll()"
                                       aria-label="Select all students">
                            </th>
                            <th class="sortable sorted-asc" onclick="sortTable('name')">Student Name</th>
                            <th class="sortable col-status" onclick="sortTable('status')">Status</th>
                            <th class="sortable col-age" onclick="sortTable('age')">Age</th>
                            <th class="col-family">Family</th>
                            <th class="col-tags">Group Tags</th>
                            <th class="sortable col-credits" onclick="sortTable('credits')">Credits</th>
                            <th class="sortable col-next-lesson" onclick="sortTable('next-lesson')">Next Lesson</th>
                            <th class="col-notes">Notes</th>
                            <th class="col-contact">Contact</th>
                            <th class="col-tutors">Tutors</th>
                        </tr>
                    </thead>
                    <tbody id="studentTableBody">
                        <!-- Sample Data -->
                        <tr class="student-row" data-student-id="1">
                            <td><input type="checkbox" class="student-checkbox" onchange="updateBulkActions()"></td>
                            <td class="student-name">Emily Chen</td>
                            <td class="col-status"><span class="status-badge status-active">Active</span></td>
                            <td class="col-age">14</td>
                            <td class="col-family">Chen Family</td>
                            <td class="col-tags">
                                <div class="tag-list">
                                    <span class="tag tag-piano">Piano</span>
                                    <span class="tag tag-advanced">Advanced</span>
                                </div>
                            </td>
                            <td class="col-credits">2</td>
                            <td class="col-next-lesson">Today, 3:00 PM</td>
                            <td class="col-notes"><div class="notes-preview">Preparing for recital in March. Focus on dynamics.</div></td>
                            <td class="col-contact">
                                <div class="contact-info">
                                    <a href="mailto:emily@example.com">emily@example.com</a><br>
                                    (555) 123-4567
                                </div>
                            </td>
                            <td class="col-tutors">Sarah Johnson</td>
                        </tr>
                        <tr class="student-row" data-student-id="2">
                            <td><input type="checkbox" class="student-checkbox" onchange="updateBulkActions()"></td>
                            <td class="student-name">Marcus Williams</td>
                            <td class="col-status"><span class="status-badge status-trial">Trial</span></td>
                            <td class="col-age">12</td>
                            <td class="col-family">Williams Family</td>
                            <td class="col-tags">
                                <div class="tag-list">
                                    <span class="tag tag-piano">Piano</span>
                                    <span class="tag tag-beginner">Beginner</span>
                                </div>
                            </td>
                            <td class="col-credits">0</td>
                            <td class="col-next-lesson">Tomorrow, 4:30 PM</td>
                            <td class="col-notes"><div class="notes-preview">Second trial lesson. Parents interested in weekly sessions.</div></td>
                            <td class="col-contact">
                                <div class="contact-info">
                                    <a href="mailto:marcus@example.com">marcus@example.com</a><br>
                                    (555) 234-5678
                                </div>
                            </td>
                            <td class="col-tutors">Michael Anderson</td>
                        </tr>
                        <tr class="student-row" data-student-id="3">
                            <td><input type="checkbox" class="student-checkbox" onchange="updateBulkActions()"></td>
                            <td class="student-name">Sophie Martinez</td>
                            <td class="col-status"><span class="status-badge status-active">Active</span></td>
                            <td class="col-age">16</td>
                            <td class="col-family">Martinez Family</td>
                            <td class="col-tags">
                                <div class="tag-list">
                                    <span class="tag tag-piano">Piano</span>
                                    <span class="tag tag-advanced">Advanced</span>
                                </div>
                            </td>
                            <td class="col-credits">1</td>
                            <td class="col-next-lesson">Jan 8, 2:00 PM</td>
                            <td class="col-notes"><div class="notes-preview">Working on Chopin Nocturne Op. 9 No. 2</div></td>
                            <td class="col-contact">
                                <div class="contact-info">
                                    <a href="mailto:sophie@example.com">sophie@example.com</a><br>
                                    (555) 345-6789
                                </div>
                            </td>
                            <td class="col-tutors">Sarah Johnson</td>
                        </tr>
                        <tr class="student-row" data-student-id="4">
                            <td><input type="checkbox" class="student-checkbox" onchange="updateBulkActions()"></td>
                            <td class="student-name">Alex Thompson</td>
                            <td class="col-status"><span class="status-badge status-waiting">Waiting</span></td>
                            <td class="col-age">10</td>
                            <td class="col-family">Thompson Family</td>
                            <td class="col-tags">
                                <div class="tag-list">
                                    <span class="tag tag-piano">Piano</span>
                                    <span class="tag tag-beginner">Beginner</span>
                                </div>
                            </td>
                            <td class="col-credits">0</td>
                            <td class="col-next-lesson">-</td>
                            <td class="col-notes"><div class="notes-preview">Starting in February. Waitlisted for time slot.</div></td>
                            <td class="col-contact">
                                <div class="contact-info">
                                    <a href="mailto:alex@example.com">alex@example.com</a><br>
                                    (555) 456-7890
                                </div>
                            </td>
                            <td class="col-tutors">-</td>
                        </tr>
                        <tr class="student-row" data-student-id="5">
                            <td><input type="checkbox" class="student-checkbox" onchange="updateBulkActions()"></td>
                            <td class="student-name">Isabella Garcia</td>
                            <td class="col-status"><span class="status-badge status-active">Active</span></td>
                            <td class="col-age">13</td>
                            <td class="col-family">Garcia Family</td>
                            <td class="col-tags">
                                <div class="tag-list">
                                    <span class="tag tag-piano">Piano</span>
                                    <span class="tag tag-beginner">Beginner</span>
                                </div>
                            </td>
                            <td class="col-credits">3</td>
                            <td class="col-next-lesson">Jan 6, 5:00 PM</td>
                            <td class="col-notes"><div class="notes-preview">Focus on sight reading exercises</div></td>
                            <td class="col-contact">
                                <div class="contact-info">
                                    <a href="mailto:isabella@example.com">isabella@example.com</a><br>
                                    (555) 567-8901
                                </div>
                            </td>
                            <td class="col-tutors">Michael Anderson</td>
                        </tr>
                        <tr class="student-row" data-student-id="6">
                            <td><input type="checkbox" class="student-checkbox" onchange="updateBulkActions()"></td>
                            <td class="student-name">James Lee</td>
                            <td class="col-status"><span class="status-badge status-lead">Lead</span></td>
                            <td class="col-age">15</td>
                            <td class="col-family">Lee Family</td>
                            <td class="col-tags">
                                <div class="tag-list">
                                    <span class="tag tag-piano">Piano</span>
                                </div>
                            </td>
                            <td class="col-credits">0</td>
                            <td class="col-next-lesson">-</td>
                            <td class="col-notes"><div class="notes-preview">Inquiry received. Scheduling first consultation.</div></td>
                            <td class="col-contact">
                                <div class="contact-info">
                                    <a href="mailto:james@example.com">james@example.com</a><br>
                                    (555) 678-9012
                                </div>
                            </td>
                            <td class="col-tutors">-</td>
                        </tr>
                        <tr class="student-row" data-student-id="7">
                            <td><input type="checkbox" class="student-checkbox" onchange="updateBulkActions()"></td>
                            <td class="student-name">Olivia Brown</td>
                            <td class="col-status"><span class="status-badge status-active">Active</span></td>
                            <td class="col-age">11</td>
                            <td class="col-family">Brown Family</td>
                            <td class="col-tags">
                                <div class="tag-list">
                                    <span class="tag tag-piano">Piano</span>
                                    <span class="tag tag-beginner">Beginner</span>
                                </div>
                            </td>
                            <td class="col-credits">1</td>
                            <td class="col-next-lesson">Jan 7, 3:30 PM</td>
                            <td class="col-notes"><div class="notes-preview">Parent requested focus on music theory</div></td>
                            <td class="col-contact">
                                <div class="contact-info">
                                    <a href="mailto:olivia@example.com">olivia@example.com</a><br>
                                    (555) 789-0123
                                </div>
                            </td>
                            <td class="col-tutors">Sarah Johnson</td>
                        </tr>
                        <tr class="student-row" data-student-id="8">
                            <td><input type="checkbox" class="student-checkbox" onchange="updateBulkActions()"></td>
                            <td class="student-name">Ethan Davis</td>
                            <td class="col-status"><span class="status-badge status-inactive">Inactive</span></td>
                            <td class="col-age">17</td>
                            <td class="col-family">Davis Family</td>
                            <td class="col-tags">
                                <div class="tag-list">
                                    <span class="tag tag-piano">Piano</span>
                                    <span class="tag tag-advanced">Advanced</span>
                                </div>
                            </td>
                            <td class="col-credits">0</td>
                            <td class="col-next-lesson">-</td>
                            <td class="col-notes"><div class="notes-preview">Paused lessons for college applications. May resume in summer.</div></td>
                            <td class="col-contact">
                                <div class="contact-info">
                                    <a href="mailto:ethan@example.com">ethan@example.com</a><br>
                                    (555) 890-1234
                                </div>
                            </td>
                            <td class="col-tutors">Michael Anderson</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Mobile Card View -->
            <div class="mobile-cards">
                <div class="student-card" data-student-id="1">
                    <div class="card-header">
                        <div>
                            <div class="card-name">Emily Chen</div>
                            <span class="status-badge status-active">Active</span>
                        </div>
                        <input type="checkbox" class="student-checkbox" onchange="updateBulkActions()">
                    </div>
                    <div class="card-details">
                        <div class="card-row">
                            <span class="card-label">Age:</span>
                            <span>14 ‚Ä¢ Piano ‚Ä¢ Advanced</span>
                        </div>
                        <div class="card-row">
                            <span class="card-label">Next Lesson:</span>
                            <span>Today, 3:00 PM</span>
                        </div>
                        <div class="card-row">
                            <span class="card-label">Credits:</span>
                            <span>2 make-up credits</span>
                        </div>
                        <div class="card-row">
                            <span class="card-label">Tutor:</span>
                            <span>Sarah Johnson</span>
                        </div>
                    </div>
                </div>

                <div class="student-card" data-student-id="2">
                    <div class="card-header">
                        <div>
                            <div class="card-name">Marcus Williams</div>
                            <span class="status-badge status-trial">Trial</span>
                        </div>
                        <input type="checkbox" class="student-checkbox" onchange="updateBulkActions()">
                    </div>
                    <div class="card-details">
                        <div class="card-row">
                            <span class="card-label">Age:</span>
                            <span>12 ‚Ä¢ Piano ‚Ä¢ Beginner</span>
                        </div>
                        <div class="card-row">
                            <span class="card-label">Next Lesson:</span>
                            <span>Tomorrow, 4:30 PM</span>
                        </div>
                        <div class="card-row">
                            <span class="card-label">Credits:</span>
                            <span>0 make-up credits</span>
                        </div>
                        <div class="card-row">
                            <span class="card-label">Tutor:</span>
                            <span>Michael Anderson</span>
                        </div>
                    </div>
                </div>

                <!-- Additional mobile cards would be here -->
            </div>

            <!-- Pagination -->
            <div class="pagination">
                <div class="pagination-info">
                    Showing <strong>1-8</strong> of <strong>247</strong> students
                </div>

                <div class="pagination-controls">
                    <div class="page-size-selector">
                        <label for="pageSize">Items per page:</label>
                        <select id="pageSize" onchange="changePageSize()">
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="200">200</option>
                        </select>
                    </div>

                    <div class="page-nav">
                        <button class="page-btn" disabled>First</button>
                        <button class="page-btn" disabled>‚Üê Prev</button>
                        <button class="page-btn active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <button class="page-btn">...</button>
                        <button class="page-btn">10</button>
                        <button class="page-btn">Next ‚Üí</button>
                        <button class="page-btn">Last</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tag Filter Modal -->
    <div class="modal-overlay" id="tagModal">
        <div class="modal">
            <div class="modal-header">Filter by Tags</div>
            <div class="modal-section">
                <p style="font-size: 14px; color: #71717a; margin-bottom: 16px;">
                    Select tags to filter students. Students with ANY of the selected tags will be shown.
                </p>
                <div class="checkbox-group">
                    <input type="checkbox" id="tag-piano" value="Piano">
                    <label for="tag-piano">üéπ Piano</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="tag-beginner" value="Beginner">
                    <label for="tag-beginner">üå± Beginner</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="tag-advanced" value="Advanced">
                    <label for="tag-advanced">‚≠ê Advanced</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="tag-recital" value="Recital Prep">
                    <label for="tag-recital">üé≠ Recital Prep</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="tag-online" value="Online Only">
                    <label for="tag-online">üíª Online Only</label>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeTagModal()">Cancel</button>
                <button class="btn btn-primary" onclick="applyTagFilters()">Apply Filters</button>
            </div>
        </div>
    </div>

    <script>
        // Column Management
        function toggleColumnDropdown() {
            const dropdown = document.getElementById('columnDropdown');
            dropdown.classList.toggle('active');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('columnDropdown');
            const columnSelector = document.querySelector('.column-selector');
            if (!columnSelector.contains(event.target)) {
                dropdown.classList.remove('active');
            }
        });

        function toggleColumn(columnClass) {
            const checkbox = document.getElementById(`col-${columnClass}`);
            const columns = document.querySelectorAll(`.col-${columnClass}`);

            columns.forEach(col => {
                col.style.display = checkbox.checked ? '' : 'none';
            });
        }

        function resetColumns() {
            // Reset to default 10 columns
            const defaultColumns = ['status', 'age', 'family', 'tags', 'credits', 'next-lesson', 'notes', 'contact', 'tutors'];
            const additionalColumns = ['attendance', 'birthday', 'last-lesson', 'subjects', 'school'];

            defaultColumns.forEach(col => {
                document.getElementById(`col-${col}`).checked = true;
                toggleColumn(col);
            });

            additionalColumns.forEach(col => {
                document.getElementById(`col-${col}`).checked = false;
                toggleColumn(col);
            });
        }

        // Sorting
        let currentSort = { column: 'name', direction: 'asc' };

        function sortTable(column) {
            const headers = document.querySelectorAll('th.sortable');
            headers.forEach(h => {
                h.classList.remove('sorted-asc', 'sorted-desc');
            });

            if (currentSort.column === column) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.direction = 'asc';
            }

            const header = event.target;
            header.classList.add(currentSort.direction === 'asc' ? 'sorted-asc' : 'sorted-desc');

            console.log(`Sorting by ${column} ${currentSort.direction}`);
            // In real implementation, this would trigger a server request or re-sort the data
        }

        // Status Filtering
        let activeStatus = 'all';

        function filterByStatus(status) {
            activeStatus = status;

            const chips = document.querySelectorAll('.status-chip');
            chips.forEach(chip => chip.classList.remove('active'));
            event.target.classList.add('active');

            console.log(`Filtering by status: ${status}`);
            updateActiveFiltersDisplay();
            // In real implementation, this would filter the data
        }

        // Tag Filtering
        let activeTags = [];

        function toggleTagModal() {
            document.getElementById('tagModal').classList.add('active');
        }

        function closeTagModal() {
            document.getElementById('tagModal').classList.remove('active');
        }

        function applyTagFilters() {
            activeTags = [];
            const checkboxes = document.querySelectorAll('#tagModal input[type="checkbox"]');
            checkboxes.forEach(cb => {
                if (cb.checked) {
                    activeTags.push(cb.value);
                }
            });

            const tagBtn = document.querySelector('.tag-filter-btn');
            if (activeTags.length > 0) {
                tagBtn.classList.add('has-filters');
                tagBtn.innerHTML = `üè∑ Tags <span class="filter-count">${activeTags.length}</span>`;
            } else {
                tagBtn.classList.remove('has-filters');
                tagBtn.innerHTML = 'üè∑ Tags';
            }

            updateActiveFiltersDisplay();
            closeTagModal();
            console.log('Active tags:', activeTags);
            // In real implementation, this would filter the data
        }

        // Search
        let searchTerm = '';

        function handleSearch() {
            searchTerm = document.getElementById('searchInput').value;
            console.log('Searching for:', searchTerm);
            updateActiveFiltersDisplay();
            // In real implementation, this would filter the data
        }

        // Active Filters Display
        function updateActiveFiltersDisplay() {
            const row = document.getElementById('activeFiltersRow');
            const container = document.getElementById('activeFilters');
            const hasFilters = searchTerm || activeStatus !== 'all' || activeTags.length > 0;

            if (!hasFilters) {
                row.style.display = 'none';
                return;
            }

            row.style.display = 'flex';
            container.innerHTML = '';

            if (searchTerm) {
                container.innerHTML += `
                    <span class="filter-tag">
                        Search: "${searchTerm}"
                        <span class="remove" onclick="clearSearch()">√ó</span>
                    </span>
                `;
            }

            if (activeStatus !== 'all') {
                container.innerHTML += `
                    <span class="filter-tag">
                        Status: ${activeStatus}
                        <span class="remove" onclick="clearStatusFilter()">√ó</span>
                    </span>
                `;
            }

            activeTags.forEach(tag => {
                container.innerHTML += `
                    <span class="filter-tag">
                        Tag: ${tag}
                        <span class="remove" onclick="removeTag('${tag}')">√ó</span>
                    </span>
                `;
            });
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            searchTerm = '';
            updateActiveFiltersDisplay();
        }

        function clearStatusFilter() {
            filterByStatus('all');
            document.querySelector('.status-chip').click();
        }

        function removeTag(tag) {
            activeTags = activeTags.filter(t => t !== tag);
            const checkbox = Array.from(document.querySelectorAll('#tagModal input[type="checkbox"]'))
                .find(cb => cb.value === tag);
            if (checkbox) checkbox.checked = false;
            applyTagFilters();
        }

        function clearAllFilters() {
            clearSearch();
            clearStatusFilter();
            activeTags = [];
            const checkboxes = document.querySelectorAll('#tagModal input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = false);
            applyTagFilters();
        }

        // Bulk Selection
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.student-checkbox');
            checkboxes.forEach(cb => {
                cb.checked = selectAll.checked;
            });
            updateBulkActions();
        }

        function updateBulkActions() {
            const checkboxes = document.querySelectorAll('.student-checkbox:checked');
            const count = checkboxes.length;
            const bulkRow = document.getElementById('bulkActionsRow');
            const selectedCount = document.getElementById('selectedCount');

            if (count > 0) {
                bulkRow.style.display = 'flex';
                selectedCount.textContent = count;

                // Update select all checkbox state
                const allCheckboxes = document.querySelectorAll('.student-checkbox');
                const selectAll = document.getElementById('selectAll');
                selectAll.checked = count === allCheckboxes.length;
                selectAll.indeterminate = count > 0 && count < allCheckboxes.length;
            } else {
                bulkRow.style.display = 'none';
                document.getElementById('selectAll').checked = false;
                document.getElementById('selectAll').indeterminate = false;
            }
        }

        // Bulk Actions
        function bulkAssignTag() {
            alert('Bulk Assign Tag functionality - would open tag assignment modal');
        }

        function bulkSetStatus() {
            alert('Bulk Set Status functionality - would open status selection modal');
        }

        function bulkEditCredits() {
            alert('Bulk Edit Credits functionality - would open credits editor');
        }

        function bulkSendEmail() {
            alert('Bulk Send Email functionality - would open email composer');
        }

        function bulkDownload() {
            alert('Bulk Download functionality - would download selected students as CSV/Excel');
        }

        // Pagination
        function changePageSize() {
            const pageSize = document.getElementById('pageSize').value;
            console.log('Changing page size to:', pageSize);
            // In real implementation, this would reload data with new page size
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Student List Wireframe Loaded');
            console.log('This is an interactive prototype demonstrating:');
            console.log('- Search & filtering capabilities');
            console.log('- Column management (show/hide columns)');
            console.log('- Sorting by column headers');
            console.log('- Bulk selection and actions');
            console.log('- Pagination controls');
            console.log('- Responsive design (resize to see mobile view)');
        });
    </script>
</body>
</html>
